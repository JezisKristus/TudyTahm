// Variables
$dark-green: var(--dark-green);
$medium-green: var(--primary-green);
$light-green: #5C8B5CFF;
$gold: var(--gold);
$text-light: var(--text-color);
$border-color: rgba(255, 255, 255, 0.9);

// Global styles
.page-container {
  display: flex;
  height: 100vh;
  background-color: $dark-green;
  color: $text-light;
}

// Main content area
.content {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  background-color: $medium-green;

  .header {
    display: flex;
    align-items: center;
    padding: 10px;
    background: linear-gradient(150deg, var(--dark-green) 60%, rgb(21, 37, 17) 40%);
    border-bottom: 2px solid #476947;
    background-color: var(--dark-green);
    justify-content: space-between;

    h1 {
      color: var(--gold);
      font-size: 24px;
    }
  }

  .share-icon {
    width: 32px;
    height: 32px;
    color: var(--gold);
    margin-right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .page-title {
    font-size: 22px;
    color: var(--gold);
    font-weight: 500;
    margin-right: auto;
  }

  .content-header {
    display: flex;
    align-items: center;
    padding: 1rem;
    background: linear-gradient(150deg, var(--dark-green) 60%, rgb(21, 37, 17) 40%);
    border-bottom: 1px solid var(--gold);
    background-color: $dark-green;

    h1 {
      color: $gold;
      margin: 0;
      font-size: 1.5rem;
      font-weight: bold;
    }

    .share-icon-large {
      width: 30px;
      height: 30px;
      background-color: $gold;
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>');
      mask-size: contain;
      mask-repeat: no-repeat;
      mask-position: center;
      margin-right: 1rem;
    }
  }

  .filters-section {
    padding: 1rem;
    background-color: $dark-green;
    border-bottom: 1px solid rgba(212, 184, 124, 0.3);
    display: flex;
    gap: 1rem;
    align-items: center;
    flex-wrap: wrap;

    .search-container {
      flex: 1;
      min-width: 250px;

      .search-input {
        width: 100%;
        background: #2a3e2b;
        color: $gold;
        border: none;
        border-radius: 8px;
        padding: 0.75rem;
        font-family: inherit;
        font-size: 0.9rem;

        &::placeholder {
          color: rgba(212, 184, 124, 0.6);
        }

        &:focus {
          outline: 1px solid $gold;
        }
      }
    }

    .filter-container {
      display: flex;
      gap: 0.5rem;

      .filter-select {
        background: #2a3e2b;
        color: $gold;
        border: none;
        border-radius: 8px;
        padding: 0.75rem;
        font-family: inherit;
        font-size: 0.9rem;
        min-width: 150px;

        &:focus {
          outline: 1px solid $gold;
        }

        option {
          background: #2a3e2b;
          color: $gold;
        }
      }
    }
  }

  .content-body {
    display: flex;
    flex-grow: 1;
    overflow: hidden;

    .groups-panel {
      width: 220px;
      background-color: $medium-green;
      border-right: 2px solid var(--dark-green);
      padding: 0;
      overflow-y: auto;

      .panel-title {
        padding: 1rem;
        font-size: 0.75rem;
        text-transform: uppercase;
        font-weight: bold;
        color: rgba(255, 255, 255, 0.8);
        background-color: $dark-green;
        border-bottom: 1px solid rgba(212, 184, 124, 0.3);
      }

      .group-item {
        padding: 0.75rem 1.25rem;
        cursor: pointer;
        border-bottom: 1px solid rgba(212, 184, 124, 0.2);
        color: $gold;
        font-weight: 500;
        transition: all 0.2s ease;

        &:hover {
          background-color: rgba(0, 0, 0, 0.16);
        }

        &.active {
          background-color: $dark-green;
          border-left: 3px solid $gold;
          color: white;
        }
      }
    }

    .maps-panel {
      flex-grow: 1;
      padding: 1.25rem;
      overflow-y: auto;

      .no-maps-message {
        text-align: center;
        padding: 3rem 1rem;
        color: rgba(255, 255, 255, 0.6);

        .no-maps-icon {
          width: 64px;
          height: 64px;
          background-color: rgba(212, 184, 124, 0.3);
          mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
          mask-size: contain;
          mask-repeat: no-repeat;
          mask-position: center;
          margin: 0 auto 1rem;
        }

        h3 {
          color: $gold;
          margin: 0 0 0.5rem 0;
        }

        p {
          margin: 0;
          font-size: 0.9rem;
        }
      }

      .map-item {
        text-decoration: none;
        color: inherit;
        display: block;
        display: flex;
        align-items: flex-start;
        margin-bottom: 1.5rem;
        padding: 1rem;
        border-bottom: 1px solid var(--dark-green);
        background: rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;

        &:hover {
          background: rgba(0, 0, 0, 0.2);
          transform: translateY(-1px);
        }

        &:last-child {
          margin-bottom: 0;
        }

        .map-thumbnail {
          width: 80px;
          height: 80px;
          flex-shrink: 0;
          margin-right: 16px;
          border-radius: 4px;
          overflow: hidden;

          img {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }
        }

        .map-details {
          flex-grow: 1;
          min-width: 0;

          .map-title {
            color: $gold;
            margin: 0 0 0.25rem 0;
            font-size: 1.1rem;
            font-weight: bold;
          }

          .map-author {
            margin: 0 0 0.5rem 0;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
          }

          .map-description {
            margin: 0 0 0.75rem 0;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            overflow: hidden;
          }

          .map-meta {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-wrap: wrap;

            .access-badge {
              padding: 0.2rem 0.5rem;
              border-radius: 4px;
              font-size: 0.75rem;
              text-transform: capitalize;
              font-weight: bold;

              &.read {
                background: rgba(92, 139, 92, 0.3);
                color: #a8c8a8;
              }

              &.write {
                background: rgba(76, 127, 76, 0.3);
                color: #b8d8b8;
              }

              &.owner {
                background: rgba(212, 184, 124, 0.3);
                color: $gold;
              }
            }

            .shared-count {
              font-size: 0.75rem;
              color: rgba(255, 255, 255, 0.5);
            }
          }
        }

        .map-actions {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          flex-shrink: 0;

          .action-btn {
            width: 32px;
            height: 32px;
            background: rgba(212, 184, 124, 0.1);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;

            &:hover {
              background: rgba(212, 184, 124, 0.2);
              transform: scale(1.05);
            }

            .info-icon,
            .share-icon {
              width: 16px;
              height: 16px;
              background-color: $gold;
              mask-size: contain;
              mask-repeat: no-repeat;
              mask-position: center;
            }

            .info-icon {
              mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>');
            }

            .share-icon {
              mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>');
            }
          }
        }
      }
    }
  }

  .content-footer {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    padding: 1rem;
    background-color: $medium-green;
    border-top: 1px solid var(--dark-green);
    gap: 0.75rem;

    .footer-btn {
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s ease;

      &:hover {
        transform: scale(1.05);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      &:active {
        transform: scale(0.98);
      }

      &.primary {
        background-color: $light-green;
        color: white;
        padding: 0.75rem 1.25rem;
      }

      &.secondary {
        background-color: rgba(92, 139, 92, 0.3);
        color: rgba(255, 255, 255, 0.8);
        padding: 0.75rem 1rem;
      }

      .plus-icon {
        font-size: 1.2rem;
        font-weight: bold;
      }

      .refresh-icon {
        width: 16px;
        height: 16px;
        background-color: currentColor;
        mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>');
        mask-size: contain;
        mask-repeat: no-repeat;
        mask-position: center;
      }
    }
  }
}

// Responsive design
@media (max-width: 768px) {
  .content {
    .filters-section {
      flex-direction: column;
      align-items: stretch;

      .search-container {
        min-width: auto;
      }

      .filter-container {
        .filter-select {
          min-width: auto;
          flex: 1;
        }
      }
    }

    .content-body {
      flex-direction: column;

      .groups-panel {
        width: 100%;
        max-height: 200px;
        border-right: none;
        border-bottom: 2px solid var(--dark-green);

        .panel-title {
          display: none;
        }

        .group-item {
          display: inline-block;
          margin: 0.5rem;
          padding: 0.5rem 1rem;
          border-radius: 20px;
          border-bottom: none;

          &.active {
            border-left: none;
          }
        }
      }

      .maps-panel {
        .map-item {
          flex-direction: column;
          text-align: center;

          .map-thumbnail {
            margin: 0 auto 1rem auto;
          }

          .map-actions {
            flex-direction: row;
            justify-content: center;
            margin-top: 1rem;
          }
        }
      }
    }

    .content-footer {
      .footer-btn {
        font-size: 0.8rem;
        padding: 0.6rem 1rem;

        &.primary {
          padding: 0.6rem 1rem;
        }
      }
    }
  }
}

.dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.dialog-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  max-width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
}